%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Kiqo User Guide 
%
% Important note:
% Chapter heading images should have a 2:1 width:height ratio,
% e.g. 920px width and 460px height.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt,fleqn]{book} % Default font size and left-justified equations

\usepackage[top=3cm,bottom=3cm,left=3.2cm,right=3.2cm,headsep=10pt,letterpaper]{geometry} % Page margins

\usepackage{xcolor} % Required for specifying colors by name
\definecolor{ocre}{RGB}{52,177,201} % Define the orange color used for highlighting throughout the book

\usepackage{float}
\usepackage{booktabs}

% Font Settings
\usepackage{avant} % Use the Avantgarde font for headings
%\usepackage{times} % Use the Times font for headings
\usepackage{mathptmx} % Use the Adobe Times Roman as the default text font together with math symbols from the Sym­bol, Chancery and Com­puter Modern fonts

\usepackage{microtype} % Slightly tweak font spacing for aesthetics
\usepackage[utf8]{inputenc} % Required for including letters with accents
\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs

\usepackage{menukeys}

% Bibliography
%\usepackage[style=alphabetic,sorting=nyt,sortcites=true,autopunct=true,babel=hyphen,hyperref=true,abbreviate=false,backref=true,backend=biber]{biblatex}
%\addbibresource{bibliography.bib} % BibTeX bibliography file
%\defbibheading{bibempty}{}

\input{structure} % Insert the commands.tex file which contains the majority of the structure behind the template

\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begingroup
\thispagestyle{empty}
\center{\includegraphics[scale=0.25]{badgecolour}} % Thirsty Goat Badge 
%\AddToShipoutPicture*{\put(0,0){\includegraphics[scale=1.25]{esahubble}}} % Image background
\centering
\vspace*{5cm}
\par\normalfont\fontsize{35}{35}\sffamily\selectfont
\textbf{Kiqo}
{\LARGE A less horrible Agilefant}\par % Book title
\vspace*{1cm}
{\Huge User Guide}\par % Author name
\endgroup

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\tableofcontents % Print the table of contents itself

%----------------------------------------------------------------------------------------
%	CHAPTER 1
%----------------------------------------------------------------------------------------
\chapter{Introduction}

\section{Kiqo}
Kiqo is an agile project management tool. Like its namesake, New Zealand's most hardy breed of goat, Kiqo is sweet as.

\section{Quick Start}
\begin{itemize}
    \item All items can be created using \menu{File > New >} or by using the keyboard shortcuts which can be found
    in the appendix.
    \item All items can be edited using \keys{\ctrl + E}\footnote{On Mac, use the command key \keys{\cmd} in place of \keys{\ctrl}.}
     or by right clicking on the item and selecting edit.
    \item All items can be deleted using \keys{\ctrl + D} or by right clicking on the item and selecting delete.
    \item To save use either \menu{File > Save} or \keys{\ctrl + S}.
    \item To load an existing {\tt .json} file use either \menu{File > Load} or \keys{\ctrl + O} and select the file using the file chooser.
    \item Undo an action using either \menu{Edit > Undo} or \keys{\ctrl + Z}.
    \item Redo an action using either \menu{Edit > Redo} or \keys{\ctrl + \shift + Z}.
    \item To revert to the last save point use \menu{File > Revert}.
\end{itemize}
\clearpage

\section{Window Layout}
The main Kiqo workspace is shown in Figure~\ref{fig:mainwindow}.

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{mainwindow}
  \caption{The main Kiqo window.\label{fig:mainwindow}}
\end{figure}

\begin{enumerate}
\item Menu bar / Window title - The window title shows the organisation name. An asterisk next to the organisation name indicates that there are unsaved changes.
The menu bar contains commands for creating items, saving and loading files, generating reports and more.
\item Side bar - The sidebar gives an overview of the items in the organisaiton and allows you to select them.
There are three ways of changing the view to show relevant information.
    \begin{itemize}
      \item From the menu bar, use \menu{View > } and select the item.
      \item From clicking the selection tabs shown in Figure~\ref{fig:mainwindow}
      \item By using the keyboard shortcuts \keys{\ctrl + 1-4}
    \end{itemize}
    The items shown in the sidebar are automatically sorted in alphabetical order.
\item Details pane - The details pane displays more information about the selected item.
\item Status bar - The status bar indicates whether there are any unsaved changes.
\item Toolbar - The toolbar provides quick access to common tasks.
   The toolbar is visible by default. There are two ways to hide it:
    \begin{itemize}
      \item From the menu bar, use \menu{View > Toolbar} and select the item.
      \item By using the keyboard shortcuts \keys{\ctrl + /}
    \end{itemize}
\end{enumerate}


%----------------------------------------------------------------------------------------
%	CHAPTER 2
%----------------------------------------------------------------------------------------
\chapter{Items}
\section{Organisation}
An organisation is the root element of the hierarchy. An organisation contains projects, teams, people, skills, backlogs and stories.
A new organisation is automatically loaded when Kiqo is initially opened. An existing organisation can also be loaded
from a {\tt .json} file. To create a new organisation use \menu{File > New > Organisation}. An organisation can be saved using
either \menu{File > Save} or \keys{ctrl + S}.

\section{Projects \& Releases}
\subsection{Create a project}
    \begin{itemize}
        \item From the menu bar, use \menu{File > New > Project}.
        \item Use the keyboard shortcut \keys{\ctrl + N}.
    \end{itemize}
    You will then be prompted to enter the details of the new project.

    \begin{figure}[h]
        \centering
        \includegraphics[scale=0.32]{newproject}
        \caption{The new project window.\label{newproject}}
    \end{figure}

\subsection{Create a Release}
    \begin{itemize}
        \item To create a release use \menu{File > New > Release}.
        \item Use the keyboard shortcut \keys{\ctrl + R}.
    \end{itemize}
    The release will be added to the project selected in the creation dialog.
    The releases for a project can be found under the projects releases heading in the tree view.

\section{Sprints}
  \begin{itemize}
    \item To create a sprint use \menu{File > New > Sprint}.
    \item Use keyboard shortcut \keys{\ctrl + I}.
  \end{itemize}
  You must a backlog, release, and team before creating a sprint.
  A sprints end date must come before the end date of the release with which it is associated.

\section{People \& Skills}
\subsection{People}
A person can be created, saved and edited in the same way as a project.
\subsection{Skills}
There are two important skills which cannot be modified: 
\begin{itemize}
  \item The Product Owner (PO) skill.
    This skill is required by a person in order for them to be the owner of a backlog. 
  \item The Scrum Master (SM) skill.
\end{itemize}
New skills can be created, edited and deleted.
\begin{itemize}
  \item Adding a new skill to the Project displays the skill in the Skills list view. If a skill exists, by default the
  first skill is shown in the details pane, unless another skill in the list is selected.
  \item Go to the skills selection pane in edit or create person and click the > arrow to add one skill to a person
  or >> to add all existing skills.
  \item In the skills selection pane click the < arrow to remove one skill or << to remove all assigned skills.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{skillsSelectionPane}
  \caption{The skills selection pane.\label{skillsSelectionPane}}
\end{figure}

\section{Teams, Roles \& Allocations}
\subsection{Team Maintenance (including Roles)}
\begin{itemize}
  \item Adding a new team to the project displays the team in the Teams list view.
  \item The members of the selected team are displayed in the team details pane.
  \item In edit or create team, use the person selection pane and click the > arrow to add one person to a team
  or >> to add all available people.
  \item In the person selection pane, click the < arrow to remove one person or << to remove all assigned people.
  \item Use the radio buttons to nominate a Product Owner, Scrum Master and/or Development Team members. Only team members who
   possess the relevant skill may be nominated.
\end{itemize}

\subsection{Project Allocation}
\begin{itemize}
  \item Teams can be allocated to projects. A team can only be allocated to one project at a time.
  \item In the project tab a team can be allocated to a project by clicking the 'Allocate Teams'.
  \item Select a team from the from the dropdown list in create allocation dialog and choose a start and an end date.
  \item Edit an allocation by clicking on a row and then changing the start or end date with the date picker.
  \item Delete an allocation by right clicking on its row and selecting 'Delete Allocation'.
\end{itemize}
\section{Backlogs \& Stories}

\subsection{Backlogs}

\begin{itemize}
\item Backlogs can be created when there is an existing project and at least one person with the product owner skill.
\item The owner of a backlog must have the product owner skill. 
\item Stories can be added to a backlog.
\end{itemize}

\subsubsection{Highlight Story State}
A backlog can show the current states of the stories it contains by toggling the check button located bellow the story table inside the backlog details pane.
If highlighting has been enabled a colour chip will be displayed on each row of the story table.
\begin{itemize}
\item A red chip indiciates that the story has a lower priority than a story that depends on it.
\item A orange chip indicates that the story is ready to be estimated.
\item A green chip indicates that the story is ready.
\end{itemize}


\subsection{Stories}

\begin{itemize}
  \item Stories can be added to a project and assigned a priority.
  \item The priority must be an integer between 1000 and -1000, inclusive.
\end{itemize}

\subsubsection{Estimation}
Stories can be estimated according to any one of these scales:
\begin{itemize}
\item Pseudo-Fibonnaci \textit{Default}
\item T-Shirt Sizes
\item Dog Breeds
\end{itemize}
The estimation scale is the same for all stories in a backlog.
share its backlog. Stories within a backlog that use a different estimation
scale will have their scale changed to that of the backlog, and the estimation unset.

\subsubsection{Acceptance Criteria}
Acceptance criteria can be added to a story and be assigned a state of readiness to help the user determine whether the
story is ready to begin. The readiness can be one of three states (ready/not ready/undetermined).
\begin{itemize}
  \item To create an acceptance criteria, inside the story details pane, press the \menu{+} button under the Acceptance Critera table
  view.
  \item To change the readiness state of the acceptance critera, a toggle button on the right hand side of the table view
  can be pressed repeatedly to alter the state.
  \item To rearrange the list of acceptance critera, click (and hold) within an acceptance critera cell (located within the table view)
  and drag the cell up or down inside the table view. Once the click has been released the acceptance critera will be
  dropped at that location and the order of the acceptance criteria will be updated.
\end{itemize}

\subsubsection{Tasks}
Tasks can be added to a story and their status can be changed via the dropdown list.
The status of a task can be set as one of the following (Not started, In Progress, Pending, Blocked, Ready, Done or Deferred).
\begin{itemize}
   \item To create a task, inside the story details pane, press the \menu{+} button under the Tasks table view.
   \item Each task has a name, status, estimate and a description. The Total Hours for all the tasks in a story is also displayed.
   \item To rearrange the list of tasks, click (and hold) within a task cell (located within the table view)
   and drag the cell up or down inside the table view. Once the click has been released the task will be dropped at
   that location and the order of the tasks will be updated.
\end{itemize}

\subsubsection{Readiness}
A story can be marked as ready when the following criteria are met:
\begin{itemize}
\item the story belongs to a backlog
\item the story is estimated
\item the story has at least one acceptance criterion
\end{itemize}

\subsubsection{Dependencies}
Some stories may depend on the completion of others. This information can be
added in the story form. 
Not all stories are available to be added as dependencies. Eligible stories must
meet the following criteria:
\begin{itemize}
\item the story is in the same backlog
\item adding the story as a dependency will not create a cyclic dependency
(cyclic dependencies are chains of dependencies that end with the story where
they begin)
\end{itemize}


%----------------------------------------------------------------------------------------
%	CHAPTER 3
%----------------------------------------------------------------------------------------
\chapter{Other Features}
\section{Report Generation}
The report generator gives the user the ability to generate reports in yaml format (http://yaml.org).
\begin{itemize}
  \item \menu{File > Generate > Status Report} opens a dialog prompting you for the type of items to include in the report and the particular items to include.
  \item Clicking \keys{Generate Report} prompts you for a valid save location on the local disk drive.
  \item Clicking \keys{Save} will generate and save the report.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{reportForm}
  \caption{Report Generation Form.\label{reportForm}}
\end{figure}

\section{Undo, Redo, Revert}
\paragraph{}
Selecting \menu{Edit > Undo} will undo the last operation made to the organisation. It is important to note that any
new changes made after \textit{undoing} changes, will empty the
\textit{redo-able} operations. Be sure to save your organisation often to avoid
unrecoverable changes.

\paragraph{}
\menu{Edit > Redo} will redo the last operation that has been \textit{undone}.

\paragraph{}
Selecting \menu{File > Revert} will prompt the user that any unsaved changes will be lost, before reverting
to the previously saved state. If the organisation has not previously been saved, then it will be reverted
to a blank organisation. Note that the \textit{undo-able} operations will be preserved for the particular save state.

\section{Search}
Search gives the user the ability to find items that match a search query.

There are two types of searches in this application.

\subsection{Simple Search}
\paragraph{}
Simple Search allows the user to find almost any item in the application, by searching for the short name of that item.

\begin{itemize}
\item Simple Search can be initiated by selecting \menu{Edit > Simple Search}.
\item You can then start typing into the text field, and the results will be gathered as you type.
\item \textit{Your search query is evaluated as a partial regular expression, which means your query must appear exactly (case-insensitive) in the short name of one of the items in the application.}
\item Selecting one of the results in the list will take you to that item.
\end{itemize}

\subsection{Advanced Search}
\paragraph{}
Advanced Search allows the user to search through nearly all of the properties that each item in the application has (eg. description, long name).
Advanced Search allows the user to limit their search to a narrowed scope, and has full support for Regular Expressions.

\begin{itemize}
\item Advanced Search can be opened by selecting \menu{Edit > Advanced Search}
\item \textit{If the \textbf{Enable RegEx} checkbox is not checked, then the query is evaluated the same as \textbf{Simple Search}, however it looks through all of the searchable fields of each item.}
\item Search results will appear in the list below, and the will have highlighting where the match was found.
\item Double clicking on a search result will take you to that item \textit{(Or in the case of Tasks, and Acceptance Criteria, it will take you to the owning story)}
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{advancedSearch}
  \caption{Advanced Search (showing results for search query: "design").\label{advancedSearch}}
\end{figure}

%----------------------------------------------------------------------------------------
%	CHAPTER 4
%----------------------------------------------------------------------------------------
\chapter{Sprints}

\section{Story Completeness Visualisation}
\begin{itemize}
\item Story Completeness Visualisation is visible to its full scale when a story is collapsed in scrum board.
\item A compacted version of this visualisation can be seen when a story is expanded in the scrum board.
\item The visualiser displays colours for each status (to do, in progress etc) and sizes each section according to the tasks estimated hours in that section.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{storyVisualisation}
  \caption{Story Completeness Visualisation.\label{storyVisualisation}}
\end{figure}

%----------------------------------------------------------------------------------------
%	CHAPTER 5
%----------------------------------------------------------------------------------------
\appendix
\chapter{Appendix}
\clearpage

\section{Keyboard Shortcuts}

\textbf{Note:} On Mac the command key \keys{\cmd} should be used
  in place of \keys{\ctrl}.

\begin{table}[h]
  \renewcommand{\arraystretch}{1.5} % Increase space between rows
  \centering
  \begin{tabular}{lc}
    \toprule
    Action & Shortcut \\
    \midrule
    Create New Project & \keys{\ctrl + N} \\
    Create New Release & \keys{\ctrl + R} \\
    Create New Team & \keys{\ctrl + T} \\
    Create New Person & \keys{\ctrl + P} \\
    Create New Skill & \keys{\ctrl + K} \\
    Create New Story & \keys{\ctrl + Y} \\
    Open Organisation & \keys{\ctrl + O} \\
    Save Organisation & \keys{\ctrl + S} \\
    Save Organisation As & \keys{\ctrl + \shift + S} \\
    Undo & \keys{\ctrl + Z} \\
    Redo & \keys{\ctrl + \shift + Z} \\
    Edit Selected Item & \keys{\ctrl + E} \\
    Delete Selected Item & \keys{\ctrl + D} \\
    Show/Hide Toolbar  &  \keys{\ctrl + /} \\
    Show/Hide List Pane  &  \keys{\ctrl + L} \\
    Switch Tabs & \keys{\ctrl + 1-4} \\
    Simple Search & Double \keys{\shift} \\
    Advanced Search & \keys{\ctrl + \shift + F} \\
    \bottomrule
  \end{tabular}
  \caption{List of Keyboard Shortcuts}
  \label{tab:shortcuts}
\end{table}

%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{listView}
%  \caption{The list view.\label{listView}}
%\end{figure}
%
%\subsection{Details Pane}
%\begin{itemize}
%  \item Selecting an item from the list (Person, Project, etc) displays the details about that item in the details pane.
%\end{itemize}
%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{detailsPane}
%  \caption{The details pane.\label{detailsPane}}
%\end{figure}
%
%\subsection{Revert}
%Revert allows a user to discard all unsaved changes and go back to the state where the project was last saved.
%If a project has not been saved then it reverts back to the state when it was last opened.
%\begin{itemize}
%  \item \menu{File > Revert} Prompts the user to Save As before reverting the project's unsaved changes.
%  \item Functionality exists to undo/redo a revert.
%\end{itemize}
%
%\appendix
%\chapter{Appendix}
%
%\subsection{UX Design}
%\begin{itemize}
%\item Click the arrow inside the tree to expand nodes.
%\end{itemize}
%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{treeView}
%  \caption{The tree view.\label{treeView}}
%\end{figure}
%
%\subsection{Validation}
%User inputs with red triangles in the top left hand corner (See Figure xyz) show that the field is being validated
%
\end{document}
